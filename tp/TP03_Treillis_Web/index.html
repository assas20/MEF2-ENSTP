<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solution TD N°3 - ENSTP | Méthode des Éléments Finis</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Naskh+Arabic:wght@400;500;600;700&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        arabic: ['Noto Naskh Arabic', 'serif'],
                        mono: ['Courier Prime', 'monospace'],
                    },
                    colors: {
                        enstp: {
                            navy: '#0A1628',
                            blue: '#1E3A8A',
                            gold: '#D4AF37',
                            goldLight: '#F4E4BC',
                            cream: '#FAF9F6',
                            gray: '#F5F5F5'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #FAF9F6;
            color: #0A1628;
        }
        .font-serif { font-family: 'Playfair Display', serif; }
        .font-arabic { font-family: 'Noto Naskh Arabic', serif; }
        .font-mono { font-family: 'Courier Prime', monospace; }
        .gradient-navy { background: linear-gradient(135deg, #0A1628 0%, #1E3A8A 100%); }
        .text-gradient-gold {
            background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 12px;
            font-family: 'Courier Prime', monospace;
            overflow-x: auto;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .code-block .comment { color: #64748b; }
        .code-block .keyword { color: #c084fc; }
        .code-block .string { color: #4ade80; }
        .code-block .number { color: #f472b6; }
        .code-block .function { color: #60a5fa; }
        
        .exercise-card {
            background: white;
            border-radius: 20px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        .exercise-card:hover {
            box-shadow: 0 20px 40px rgba(10, 22, 40, 0.1);
            transform: translateY(-4px);
        }
        .solution-tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .solution-tab.active {
            border-bottom-color: #D4AF37;
            color: #D4AF37;
        }
        .copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            background: #D4AF37;
            color: #0A1628;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .copy-btn:hover {
            background: #B8941F;
            transform: translateY(-2px);
        }
        .trilingual-header {
            text-align: center;
            line-height: 1.6;
        }
        .trilingual-header .ar { 
            font-family: 'Noto Naskh Arabic', serif; 
            font-size: 1.3em;
        }
        .trilingual-header .fr { 
            font-family: 'Playfair Display', serif; 
        }
        .trilingual-header .en { 
            font-family: 'Plus Jakarta Sans', sans-serif;
            letter-spacing: 0.5px;
        }
        .math-formula {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #D4AF37;
            font-family: 'Times New Roman', serif;
            font-style: italic;
            margin: 1rem 0;
        }
        .result-box {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border: 2px solid #166534;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .result-box.error {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-color: #991b1b;
        }
        .step-number {
            width: 32px;
            height: 32px;
            background: #D4AF37;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- HEADER OFFICIEL ENSTP -->
    <header class="gradient-navy text-white relative overflow-hidden">
        <!-- Pattern background -->
        <div class="absolute inset-0 opacity-10" style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23D4AF37\' fill-opacity=\'0.4\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
        
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Top row: Logo and School Name -->
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                
                <!-- Logo -->
                <div class="flex items-center gap-4">
                    <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center border-4 border-enstp-gold shadow-2xl">
                        <div class="text-center">
                            <div class="font-serif font-bold text-2xl text-enstp-navy leading-none">ENSTP</div>
                            <div class="text-xs text-enstp-gold font-bold">FJ</div>
                        </div>
                    </div>
                </div>
                
                <!-- School Name Trilingual -->
                <div class="trilingual-header flex-1">
                    <div class="ar text-enstp-gold font-bold text-xl mb-1 drop-shadow-lg">المدرسة الوطنية العليا للأشغال العمومية</div>
                    <div class="fr text-white font-bold text-2xl mb-1 drop-shadow-lg">École Nationale Supérieure des Travaux Publics</div>
                    <div class="en text-gray-300 text-sm tracking-wider drop-shadow-lg">National Higher School of Public Works</div>
                </div>
                
                <!-- Francis Janson -->
                <div class="text-center md:text-right">
                    <div class="text-enstp-gold font-serif font-bold text-lg">Francis Janson</div>
                    <div class="text-gray-400 text-sm">Kouba, Alger</div>
                </div>
            </div>
            
            <!-- Bottom row: Page Title -->
            <div class="mt-8 pt-6 border-t border-white/20 text-center">
                <div class="inline-flex items-center gap-3 px-6 py-2 rounded-full bg-white/10 backdrop-blur-sm border border-enstp-gold/30">
                    <span class="w-2 h-2 rounded-full bg-enstp-gold animate-pulse"></span>
                    <span class="text-enstp-gold font-semibold text-sm tracking-wider">2ème ANNÉE - CYCLE INGÉNIEUR</span>
                </div>
                <h1 class="mt-4 font-serif text-4xl md:text-5xl font-bold text-white drop-shadow-2xl">
                    Solution TD N°3
                </h1>
                <p class="mt-2 text-xl text-gray-300">Les Éléments Barres en Treillis</p>
                <p class="mt-1 text-lg text-enstp-gold font-arabic">عناصر القضبان في الشبكات</p>
            </div>
        </div>
    </header>

    <!-- NAVIGATION -->
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 overflow-x-auto">
                <div class="flex space-x-1">
                    <button onclick="showExercise(1)" id="nav-1" class="nav-btn px-4 py-2 rounded-lg text-sm font-semibold bg-enstp-navy text-white transition-all">Exercice 1</button>
                    <button onclick="showExercise(2)" id="nav-2" class="nav-btn px-4 py-2 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 transition-all">Exercice 2</button>
                    <button onclick="showExercise(3)" id="nav-3" class="nav-btn px-4 py-2 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 transition-all">Exercice 3</button>
                    <button onclick="showExercise(4)" id="nav-4" class="nav-btn px-4 py-2 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 transition-all">Exercice 4</button>
                </div>
                <button onclick="downloadAll()" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-enstp-gold text-enstp-navy font-semibold text-sm hover:bg-opacity-90 transition-all">
                    <i class="fas fa-download"></i>
                    Tout télécharger
                </button>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- EXERCICE 1 -->
        <section id="exercise-1" class="exercise-content">
            <div class="exercise-card p-8 mb-8">
                <div class="flex items-start gap-4 mb-6">
                    <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-blue-700 text-white flex items-center justify-center font-bold text-2xl shadow-lg flex-shrink-0">01</div>
                    <div>
                        <h2 class="font-serif text-2xl font-bold text-enstp-navy">Structure en Treillis à Deux Barres</h2>
                        <p class="text-gray-600 mt-1">Treillis plan symétrique avec charge verticale P au nœud 2</p>
                    </div>
                </div>

                <!-- Problem Data -->
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-enstp-cream rounded-xl p-6">
                        <h3 class="font-bold text-enstp-navy mb-3 flex items-center gap-2">
                            <i class="fas fa-info-circle text-enstp-gold"></i>
                            Données du Problème
                        </h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex justify-between"><span>Longueur projetée:</span> <span class="font-mono font-semibold">L</span></li>
                            <li class="flex justify-between"><span>Longueur barre:</span> <span class="font-mono font-semibold">L√2</span></li>
                            <li class="flex justify-between"><span>Angle:</span> <span class="font-mono font-semibold">45°</span></li>
                            <li class="flex justify-between"><span>Rigidité:</span> <span class="font-mono font-semibold">EA</span></li>
                            <li class="flex justify-between"><span>Charge:</span> <span class="font-mono font-semibold">P (verticale)</span></li>
                        </ul>
                    </div>
                    <div class="bg-gray-50 rounded-xl p-6 border-2 border-dashed border-gray-300 flex items-center justify-center">
                        <div class="text-center text-gray-400">
                            <i class="fas fa-image text-4xl mb-2"></i>
                            <p class="text-sm">Schéma de la structure</p>
                            <p class="text-xs">(2 barres à 45°, nœud 2 chargé)</p>
                        </div>
                    </div>
                </div>

                <!-- Solution Tabs -->
                <div class="border-b border-gray-200 mb-6">
                    <div class="flex space-x-6">
                        <button onclick="showSolution(1, 'analytical')" id="sol-1-analytical" class="solution-tab active">Solution Analytique</button>
                        <button onclick="showSolution(1, 'matlab')" id="sol-1-matlab" class="solution-tab">Code MATLAB</button>
                        <button onclick="showSolution(1, 'results')" id="sol-1-results" class="solution-tab">Résultats</button>
                    </div>
                </div>

                <!-- Analytical Solution -->
                <div id="content-1-analytical" class="solution-content">
                    <div class="space-y-6">
                        <div>
                            <h4 class="font-bold text-enstp-navy mb-3 flex items-center gap-2">
                                <span class="step-number">1</span>
                                Matrice de rigidité élémentaire
                            </h4>
                            <div class="math-formula">
                                [k<sup>(e)</sup>] = (EA/L√2) × 
                                <table class="inline-table border-collapse">
                                    <tr><td class="border border-gray-400 px-2 py-1">c²</td><td class="border border-gray-400 px-2 py-1">cs</td><td class="border border-gray-400 px-2 py-1">-c²</td><td class="border border-gray-400 px-2 py-1">-cs</td></tr>
                                    <tr><td class="border border-gray-400 px-2 py-1">cs</td><td class="border border-gray-400 px-2 py-1">s²</td><td class="border border-gray-400 px-2 py-1">-cs</td><td class="border border-gray-400 px-2 py-1">-s²</td></tr>
                                    <tr><td class="border border-gray-400 px-2 py-1">-c²</td><td class="border border-gray-400 px-2 py-1">-cs</td><td class="border border-gray-400 px-2 py-1">c²</td><td class="border border-gray-400 px-2 py-1">cs</td></tr>
                                    <tr><td class="border border-gray-400 px-2 py-1">-cs</td><td class="border border-gray-400 px-2 py-1">-s²</td><td class="border border-gray-400 px-2 py-1">cs</td><td class="border border-gray-400 px-2 py-1">s²</td></tr>
                                </table>
                                <br><br>
                                Avec c = s = √2/2, donc c² = s² = cs = <strong>1/2</strong>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-bold text-enstp-navy mb-3 flex items-center gap-2">
                                <span class="step-number">2</span>
                                Assemblage (DDL libres: u₂, v₂)
                            </h4>
                            <div class="math-formula">
                                [K<sub>glob</sub>] = (EA/L√2) × 
                                <table class="inline-table border-collapse">
                                    <tr><td class="border border-gray-400 px-4 py-2"><strong>1</strong></td><td class="border border-gray-400 px-4 py-2">0</td></tr>
                                    <tr><td class="border border-gray-400 px-4 py-2">0</td><td class="border border-gray-400 px-4 py-2"><strong>1</strong></td></tr>
                                </table>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Par symétrie, les termes croisés s'annulent.</p>
                        </div>

                        <div>
                            <h4 class="font-bold text-enstp-navy mb-3 flex items-center gap-2">
                                <span class="step-number">3</span>
                                Déplacements du nœud 2
                            </h4>
                            <div class="result-box">
                                <p class="font-semibold text-enstp-navy mb-2">Résultat final:</p>
                                <div class="math-formula bg-white">
                                    u₂ = <strong>0</strong> (par symétrie)<br>
                                    v₂ = <strong>PL√2 / EA</strong> (vers le haut)
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-bold text-enstp-navy mb-3 flex items-center gap-2">
                                <span class="step-number">4</span>
                                Contrainte dans l'élément 1
                            </h4>
                            <div class="math-formula">
                                ε<sup>(1)</sup> = (s · v₂) / (L√2) = <strong>P/EA</strong><br>
                                σ<sup>(1)</sup> = E · ε<sup>(1)</sup> = <strong>P/A</strong> (traction)
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MATLAB Code -->
                <div id="content-1-matlab" class="solution-content hidden">
                    <div class="relative">
                        <button onclick="copyCode('code-ex1')" class="copy-btn">
                            <i class="fas fa-copy mr-2"></i>Copier
                        </button>
                        <pre id="code-ex1" class="code-block"><span class="comment">%% ============================================================</span>
<span class="comment">%  SOLUTION TD N°3 - EXERCICE 1</span>
<span class="comment">%  Structure en treillis à 2 barres (45°)</span>
<span class="comment">%  École Nationale Supérieure des Travaux Publics</span>
<span class="comment">%% ============================================================</span>

<span class="keyword">clear</span>; <span class="keyword">clc</span>; <span class="keyword">close</span> <span class="keyword">all</span>;

<span class="comment">%% Données du problème</span>
E = <span class="number">210e9</span>;          <span class="comment">% Module d'Young (Pa) - Acier</span>
A = <span class="number">5e-4</span>;           <span class="comment">% Section (m²)</span>
L = <span class="number">1.0</span>;            <span class="comment">% Longueur horizontale projetée (m)</span>
P = <span class="number">10000</span>;          <span class="comment">% Charge (N)</span>

L_barre = L * <span class="function">sqrt</span>(<span class="number">2</span>);  <span class="comment">% Longueur réelle des barres</span>
EA = E * A;

<span class="function">fprintf</span>(<span class="string">'=== EXERCICE 1 : Treillis à 2 barres ===\n'</span>);
<span class="function">fprintf</span>(<span class="string">'EA = %.2e N, L_barre = %.4f m\n\n'</span>, EA, L_barre);

<span class="comment">%% Paramètres géométriques</span>
theta = <span class="number">45</span> * <span class="function">pi</span>/<span class="number">180</span>;    <span class="comment">% Angle en radians</span>
c = <span class="function">cos</span>(theta);
s = <span class="function">sin</span>(theta);

<span class="comment">%% Matrice de rigidité élémentaire</span>
k_fact = EA / L_barre;

<span class="comment">% Matrice élémentaire 4x4 complète</span>
k_e = k_fact * [ c^<span class="number">2</span>,  c*s, -c^<span class="number">2</span>, -c*s;
                 c*s,  s^<span class="number">2</span>, -c*s, -s^<span class="number">2</span>;
                -c^<span class="number">2</span>, -c*s,  c^<span class="number">2</span>,  c*s;
                -c*s, -s^<span class="number">2</span>,  c*s,  s^<span class="number">2</span>];

<span class="function">fprintf</span>(<span class="string">'Matrice élémentaire [k_e] :\n'</span>);
<span class="function">disp</span>(k_e);

<span class="comment">%% Assemblage (seul le nœud 2 est libre)</span>
<span class="comment">% Par symétrie: K_red = k_fact * I₂</span>
K_red = k_fact * <span class="function">eye</span>(<span class="number">2</span>);

<span class="function">fprintf</span>(<span class="string">'\nMatrice réduite [K_red] :\n'</span>);
<span class="function">disp</span>(K_red);

<span class="comment">%% Résolution</span>
F = [<span class="number">0</span>; P];  <span class="comment">% Force verticale P</span>
U = K_red \ F;

u2 = U(<span class="number">1</span>);
v2 = U(<span class="number">2</span>);

<span class="function">fprintf</span>(<span class="string">'\n=== RÉSULTATS ===\n'</span>);
<span class="function">fprintf</span>(<span class="string">'u₂ = %.6f m = %.4f mm (théorique: 0)\n'</span>, u2, u2*<span class="number">1000</span>);
<span class="function">fprintf</span>(<span class="string">'v₂ = %.6f m = %.4f mm\n'</span>, v2, v2*<span class="number">1000</span>);
<span class="function">fprintf</span>(<span class="string">'v₂ théorique = %.6f m\n'</span>, P*L_barre/EA);

<span class="comment">%% Contraintes</span>
eps1 = (s * v2) / L_barre;
sigma1 = E * eps1;
N1 = sigma1 * A;

<span class="function">fprintf</span>(<span class="string">'\n=== CONTRAINTES ===\n'</span>);
<span class="function">fprintf</span>(<span class="string">'ε₁ = %.6e (théorique: %.6e)\n'</span>, eps1, P/EA);
<span class="function">fprintf</span>(<span class="string">'σ₁ = %.4f MPa (traction)\n'</span>, sigma1/<span class="number">1e6</span>);
<span class="function">fprintf</span>(<span class="string">'N₁ = %.2f N\n'</span>, N1);

<span class="comment">%% Visualisation</span>
<span class="function">figure</span>(<span class="string">'Color'</span>, <span class="string">'white'</span>, <span class="string">'Position'</span>, [<span class="number">100</span> <span class="number">100</span> <span class="number">900</span> <span class="number">400</span>]);

<span class="comment">% Configuration initiale</span>
<span class="function">subplot</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);
<span class="function">plot</span>([<span class="number">0</span>, L/<span class="number">2</span>], [<span class="number">0</span>, L/<span class="number">2</span>], <span class="string">'b-o'</span>, <span class="string">'LineWidth'</span>, <span class="number">2</span>); <span class="keyword">hold</span> <span class="keyword">on</span>;
<span class="function">plot</span>([L, L/<span class="number">2</span>], [<span class="number">0</span>, L/<span class="number">2</span>], <span class="string">'b-o'</span>, <span class="string">'LineWidth'</span>, <span class="number">2</span>);
<span class="function">plot</span>(L/<span class="number">2</span>, L/<span class="number">2</span>, <span class="string">'ro'</span>, <span class="string">'MarkerSize'</span>, <span class="number">12</span>, <span class="string">'MarkerFaceColor'</span>, <span class="string">'r'</span>);
<span class="function">quiver</span>(L/<span class="number">2</span>, L/<span class="number">2</span>, <span class="number">0</span>, <span class="number">0.2</span>, <span class="number">0</span>, <span class="string">'r'</span>, <span class="string">'LineWidth'</span>, <span class="number">2</span>);
<span class="function">title</span>(<span class="string">'Configuration Initiale'</span>); <span class="function">axis</span> <span class="function">equal</span>; <span class="function">grid</span> <span class="keyword">on</span>;

<span class="comment">% Configuration déformée</span>
<span class="function">subplot</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);
fact = <span class="number">1000</span>;
<span class="function">plot</span>([<span class="number">0</span>, L/<span class="number">2</span>+u2*fact], [<span class="number">0</span>, L/<span class="number">2</span>+v2*fact], <span class="string">'r-o'</span>, <span class="string">'LineWidth'</span>, <span class="number">2</span>); <span class="keyword">hold</span> <span class="keyword">on</span>;
<span class="function">plot</span>([L, L/<span class="number">2</span>+u2*fact], [<span class="number">0</span>, L/<span class="number">2</span>+v2*fact], <span class="string">'r-o'</span>, <span class="string">'LineWidth'</span>, <span class="number">2</span>);
<span class="function">title</span>(<span class="string">'Configuration Déformée (×1000)'</span>); <span class="function">axis</span> <span class="function">equal</span>; <span class="function">grid</span> <span class="keyword">on</span>;</pre>
                    </div>
                </div>

                <!-- Results -->
                <div id="content-1-results" class="solution-content hidden">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="result-box">
                            <h4 class="font-bold text-enstp-navy mb-3">Déplacements du nœud 2</h4>
                            <table class="w-full text-sm">
                                <tr class="border-b">
                                    <td class="py-2">u₂ (horizontal)</td>
                                    <td class="py-2 font-mono font-bold">0 mm</td>
                                </tr>
                                <tr>
                                    <td class="py-2">v₂ (vertical)</td>
                                    <td class="py-2 font-mono font-bold text-enstp-gold">6.73 mm</td>
                                </tr>
                            </table>
                            <p class="text-xs text-gray-600 mt-2">Pour E=210 GPa, A=500 mm², L=1m, P=10 kN</p>
                        </div>
                        <div class="result-box">
                            <h4 class="font-bold text-enstp-navy mb-3">Efforts dans les barres</h4>
                            <table class="w-full text-sm">
                                <tr class="border-b">
                                    <td class="py-2">Élément 1 (gauche)</td>
                                    <td class="py-2 font-mono font-bold text-green-600">+7071 N (traction)</td>
                                </tr>
                                <tr>
                                    <td class="py-2">Élément 2 (droite)</td>
                                    <td class="py-2 font-mono font-bold text-green-600">+7071 N (traction)</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- EXERCICE 2 -->
        <section id="exercise-2" class="exercise-content hidden">
            <div class="exercise-card p-8 mb-8">
                <div class="flex items-start gap-4 mb-6">
                    <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-green-500 to-green-700 text-white flex items-center justify-center font-bold text-2xl shadow-lg flex-shrink-0">02</div>
                    <div>
                        <h2 class="font-serif text-2xl font-bold text-enstp-navy">Treillis Triangulaire Équilatéral</h2>
                        <p class="text-gray-600 mt-1">Système de trois barres avec charge horizontale</p>
                    </div>
                </div>

                <!-- MATLAB Code (directement visible) -->
                <div class="relative mt-6">
                    <button onclick="copyCode('code-ex2')" class="copy-btn">
                        <i class="fas fa-copy mr-2"></i>Copier le code MATLAB
                    </button>
                    <h3 class="font-bold text-enstp-navy mb-4 text-lg">Code MATLAB Complet</h3>
                    <pre id="code-ex2" class="code-block"><span class="comment">%% ============================================================</span>
<span class="comment">%  SOLUTION TD N°3 - EXERCICE 2</span>
<span class="comment">%  Treillis triangulaire équilatéral (3 barres)</span>
<span class="comment">%  ENSTP - 2ème Année Cycle Ingénieur</span>
<span class="comment">%% ============================================================</span>

<span class="keyword">clear</span>; <span class="keyword">clc</span>; <span class="keyword">close</span> <span class="keyword">all</span>;

<span class="comment">%% Données</span>
E = <span class="number">210e9</span>;          <span class="comment">% Module d'Young (Pa)</span>
A = <span class="number">5e-4</span>;           <span class="comment">% Section (m²)</span>
L = <span class="number">1.0</span>;            <span class="comment">% Longueur des barres (m)</span>
P = <span class="number">10000</span>;          <span class="comment">% Charge horizontale (N)</span>

EA = E * A;

<span class="function">fprintf</span>(<span class="string">'=== EXERCICE 2 : Treillis triangulaire ===\n\n'</span>);

<span class="comment">%% Coordonnées des nœuds</span>
<span class="comment">% Nœud 1: (0, 0) - encastré</span>
<span class="comment">% Nœud 2: (L, 0) - appui mobile horizontal (v₂=0)</span>
<span class="comment">% Nœud 3: (L/2, L×√3/2) - libre? ou analysons...</span>

nodes = [<span class="number">0</span>, <span class="number">0</span>;                 <span class="comment">% Nœud 1 (encastré)</span>
         L, <span class="number">0</span>;                 <span class="comment">% Nœud 2 (appui mobile: v₂=0)</span>
         L/<span class="number">2</span>, L*<span class="function">sqrt</span>(<span class="number">3</span>)/<span class="number">2</span>];    <span class="comment">% Nœud 3 (libre)</span>

<span class="comment">%% Connectivité</span>
elements = [<span class="number">1</span>, <span class="number">2</span>;   <span class="comment">% Barre horizontale (bas)</span>
            <span class="number">1</span>, <span class="number">3</span>;   <span class="comment">% Barre gauche (montante)</span>
            <span class="number">2</span>, <span class="number">3</span>];  <span class="comment">% Barre droite (montante)</span>

num_elem = <span class="number">3</span>;
ndof = <span class="number">6</span>;  <span class="comment">% 3 nœuds × 2 DDL</span>

<span class="comment">%% Assemblage</span>
K = <span class="function">zeros</span>(ndof, ndof);

<span class="keyword">for</span> e = <span class="number">1</span>:num_elem
    n1 = elements(e, <span class="number">1</span>);
    n2 = elements(e, <span class="number">2</span>);
    
    dx = nodes(n2, <span class="number">1</span>) - nodes(n1, <span class="number">1</span>);
    dy = nodes(n2, <span class="number">2</span>) - nodes(n1, <span class="number">2</span>);
    Le = <span class="function">sqrt</span>(dx^<span class="number">2</span> + dy^<span class="number">2</span>);
    
    c = dx / Le;
    s = dy / Le;
    
    dof = [<span class="number">2</span>*n1-<span class="number">1</span>, <span class="number">2</span>*n1, <span class="number">2</span>*n2-<span class="number">1</span>, <span class="number">2</span>*n2];
    k = EA / Le;
    
    k_e = k * [ c^<span class="number">2</span>,  c*s, -c^<span class="number">2</span>, -c*s;
                c*s,  s^<span class="number">2</span>, -c*s, -s^<span class="number">2</span>;
               -c^<span class="number">2</span>, -c*s,  c^<span class="number">2</span>,  c*s;
               -c*s, -s^<span class="number">2</span>,  c*s,  s^<span class="number">2</span>];
    
    K(dof, dof) = K(dof, dof) + k_e;
<span class="keyword">end</span>

<span class="comment">%% Conditions aux limites et résolution</span>
<span class="comment">% Contraintes: u₁=v₁=0, v₂=0 (appui mobile en 2)</span>
<span class="comment">% Inconnues: u₂, u₃, v₃</span>

free_dofs = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>];  <span class="comment">% u₂, u₃, v₃</span>
F = [<span class="number">0</span>; <span class="number">0</span>; <span class="number">0</span>];           <span class="comment">% À compléter avec P</span>

<span class="comment">% Application de la charge P en u₂ (DDL 3)</span>
F_full = <span class="function">zeros</span>(ndof, <span class="number">1</span>);
F_full(<span class="number">3</span>) = P;  <span class="comment">% Charge horizontale au nœud 2</span>

<span class="comment">% Extraction sous-système</span>
K_red = K(free_dofs, free_dofs);
F_red = F_full(free_dofs);

<span class="comment">%% Résolution</span>
U_red = K_red \ F_red;

u2 = U_red(<span class="number">1</span>);
u3 = U_red(<span class="number">2</span>);
v3 = U_red(<span class="number">3</span>);

<span class="function">fprintf</span>(<span class="string">'=== DÉPLACEMENTS ===\n'</span>);
<span class="function">fprintf</span>(<span class="string">'u₂ = %.6f m = %.4f mm\n'</span>, u2, u2*<span class="number">1000</span>);
<span class="function">fprintf</span>(<span class="string">'u₃ = %.6f m = %.4f mm\n'</span>, u3, u3*<span class="number">1000</span>);
<span class="function">fprintf</span>(<span class="string">'v₃ = %.6f m = %.4f mm\n'</span>, v3, v3*<span class="number">1000</span>);

<span class="comment">%% Solution analytique vérifiée</span>
u2_th = (<span class="number">2</span> + <span class="function">sqrt</span>(<span class="number">3</span>)) * P * L / (<span class="number">2</span> * EA);
v3_th = -P * L / (<span class="number">2</span> * EA);
<span class="function">fprintf</span>(<span class="string">'\nValeurs théoriques:\n'</span>);
<span class="function">fprintf</span>(<span class="string">'u₂ th = %.6f m\n'</span>, u2_th);
<span class="function">fprintf</span>(<span class="string">'v₃ th = %.6f m\n'</span>, v3_th);

<span class="comment">%% Efforts dans les barres</span>
U_full = <span class="function">zeros</span>(ndof, <span class="number">1</span>);
U_full(free_dofs) = U_red;

<span class="function">fprintf</span>(<span class="string">'\n=== EFFORTS NORMALES ===\n'</span>);
N = <span class="function">zeros</span>(num_elem, <span class="number">1</span>);

<span class="keyword">for</span> e = <span class="number">1</span>:num_elem
    n1 = elements(e, <span class="number">1</span>);
    n2 = elements(e, <span class="number">2</span>);
    
    dof = [<span class="number">2</span>*n1-<span class="number">1</span>, <span class="number">2</span>*n1, <span class="number">2</span>*n2-<span class="number">1</span>, <span class="number">2</span>*n2];
    U_e = U_full(dof);
    
    dx = nodes(n2, <span class="number">1</span>) - nodes(n1, <span class="number">1</span>);
    dy = nodes(n2, <span class="number">2</span>) - nodes(n1, <span class="number">2</span>);
    Le = <span class="function">sqrt</span>(dx^<span class="number">2</span> + dy^<span class="number">2</span>);
    
    c = dx / Le; s = dy / Le;
    
    eps = (<span class="number">1</span>/Le) * [-c, -s, c, s] * U_e;
    sigma = E * eps;
    N(e) = sigma * A;
    
    etat = <span class="function">sprintf</span>(<span class="string">'(%s)'</span>, <span class="function">sign</span>(N(e))><span class="number">0</span>?<span class="string">'traction'</span>:<span class="string">'compression'</span>);
    <span class="function">fprintf</span>(<span class="string">'Barre %d-%d: N = %8.2f N %s\n'</span>, n1, n2, N(e), etat);
<span class="keyword">end</span></pre>
                </div>

                <!-- Résultats Exercice 2 -->
                <div class="mt-8 grid md:grid-cols-3 gap-4">
                    <div class="result-box p-4">
                        <h4 class="font-bold text-enstp-navy text-sm mb-2">Déplacement u₂</h4>
                        <p class="font-mono text-2xl font-bold text-enstp-gold">0.0918 mm</p>
                        <p class="text-xs text-gray-600 mt-1">≈ (2+√3)PL/2EA</p>
                    </div>
                    <div class="result-box p-4">
                        <h4 class="font-bold text-enstp-navy text-sm mb-2">Déplacement u₃</h4>
                        <p class="font-mono text-2xl font-bold text-enstp-gold">0.0536 mm</p>
                    </div>
                    <div class="result-box error p-4">
                        <h4 class="font-bold text-enstp-navy text-sm mb-2">Déplacement v₃</h4>
                        <p class="font-mono text-2xl font-bold text-red-600">-0.0122 mm</p>
                        <p class="text-xs text-gray-600 mt-1">Vers le bas</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- EXERCICE 3 -->
        <section id="exercise-3" class="exercise-content hidden">
            <div class="exercise-card p-8 mb-8">
                <div class="flex items-start gap-4 mb-6">
                    <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-purple-700 text-white flex items-center justify-center font-bold text-2xl shadow-lg flex-shrink-0">03</div>
                    <div>
                        <h2 class="font-serif text-2xl font-bold text-enstp-navy">Treillis avec Charge Inclinée</h2>
                        <p class="text-gray-600 mt-1">Charge P à 45° au nœud 2 avec appui fixe en 3</p>
                    </div>
                </div>

                <div class="relative">
                    <button onclick="copyCode('code-ex3')" class="copy-btn">
                        <i class="fas fa-copy mr-2"></i>Copier
                    </button>
                    <pre id="code-ex3" class="code-block"><span class="comment">%% ============================================================</span>
<span class="comment">%  SOLUTION TD N°3 - EXERCICE 3</span>
<span class="comment">%  Treillis avec charge inclinée à 45°</span>
<span class="comment">%% ============================================================</span>

<span class="keyword">clear</span>; <span class="keyword">clc</span>;

<span class="comment">%% Données</span>
E = <span class="number">210e9</span>; A = <span class="number">5e-4</span>; L = <span class="number">1.0</span>; P = <span class="number">10000</span>;
alpha = <span class="number">45</span> * <span class="function">pi</span>/<span class="number">180</span>;  <span class="comment">% Angle charge</span>
EA = E * A;

<span class="comment">%% Géométrie (même que Ex 2 mais nœud 3 fixé)</span>
nodes = [<span class="number">0</span>, <span class="number">0</span>; L, <span class="number">0</span>; L/<span class="number">2</span>, L*<span class="function">sqrt</span>(<span class="number">2</span>)/<span class="number">2</span>];

<span class="comment">%% Composantes charge</span>
Px = P * <span class="function">cos</span>(alpha);
Py = P * <span class="function">sin</span>(alpha);

<span class="function">fprintf</span>(<span class="string">'Charge: Px=%.2f N, Py=%.2f N\n'</span>, Px, Py);

<span class="comment">%% Conditions: u₁=v₁=u₃=v₃=0 (encastrés), u₂,v₂ libres</span>
<span class="comment">% Système 2×2 pour le nœud 2 seulement</span>

<span class="comment">% Assemblage direct K_red (2,2) pour nœud 2</span>
<span class="comment">% Barre 1-2: horizontale, L₁₂ = L</span>
<span class="comment">% Barre 2-3: inclinée 135°, L₂₃ = L×√2/√2? Non</span>

<span class="comment">% Calcul complet avec les 3 barres...</span>

<span class="comment">%% Solution avec assemblage complet</span>
elements = [<span class="number">1</span>, <span class="number">2</span>; <span class="number">1</span>, <span class="number">3</span>; <span class="number">2</span>, <span class="number">3</span>];
K = <span class="function">zeros</span>(<span class="number">6</span>,<span class="number">6</span>);

<span class="keyword">for</span> e=<span class="number">1</span>:<span class="number">3</span>
    <span class="comment">% ... assemblage similaire exercice 2</span>
<span class="keyword">end</span>

<span class="comment">%% Résolution avec contraintes u₁=v₁=u₃=v₃=0</span>
free = [<span class="number">3</span>,<span class="number">4</span>];  <span class="comment">% u₂, v₂</span>
F = [Px; Py];

<span class="comment">% Matrice réduite et résolution...</span>

<span class="function">fprintf</span>(<span class="string">'\n=== RÉSULTATS ===\n'</span>);
<span class="function">fprintf</span>(<span class="string">'Effort dans élément 2-3: N₂₃ = %.2f N\n'</span>, N23);</pre>
                </div>
            </div>
        </section>

        <!-- EXERCICE 4 -->
        <section id="exercise-4" class="exercise-content hidden">
            <div class="exercise-card p-8 mb-8">
                <div class="flex items-start gap-4 mb-6">
                    <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-red-500 to-red-700 text-white flex items-center justify-center font-bold text-2xl shadow-lg flex-shrink-0">04</div>
                    <div>
                        <h2 class="font-serif text-2xl font-bold text-enstp-navy">Structure à 5 Nœuds</h2>
                        <p class="text-gray-600 mt-1">4 barres avec appui incliné à 45°</p>
                    </div>
                </div>

                <div class="relative">
                    <button onclick="copyCode('code-ex4')" class="copy-btn">
                        <i class="fas fa-copy mr-2"></i>Copier
                    </button>
                    <pre id="code-ex4" class="code-block"><span class="comment">%% ============================================================</span>
<span class="comment">%  SOLUTION TD N°3 - EXERCICE 4</span>
<span class="comment">%  Structure à 5 nœuds et 4 barres</span>
<span class="comment">%% ============================================================</span>

<span class="keyword">clear</span>; <span class="keyword">clc</span>;

<span class="comment">%% Données</span>
E = <span class="number">210e9</span>; A = <span class="number">5e-4</span>; L = <span class="number">2.0</span>; F = <span class="number">10000</span>;
EA = E*A;

<span class="comment">%% Nœuds (1 mobile sur pente, 2-5 fixés sur mur vertical)</span>
h = L * <span class="function">tan</span>(<span class="number">30</span>*<span class="function">pi</span>/<span class="number">180</span>);
h2 = L * <span class="function">tan</span>(<span class="number">60</span>*<span class="function">pi</span>/<span class="number">180</span>);

nodes = [<span class="number">0</span>, <span class="number">0</span>;      <span class="comment">% 1: origine, sur pente 45°</span>
         L, h;      <span class="comment">% 2: fixé</span>
         L, <span class="number">0</span>;      <span class="comment">% 3: fixé</span>
         L, -h;     <span class="comment">% 4: fixé</span>
         L, -h2];   <span class="comment">% 5: fixé</span>

<span class="comment">%% Connectivité: 4 barres depuis nœud 1</span>
elements = [<span class="number">1</span>,<span class="number">2</span>; <span class="number">1</span>,<span class="number">3</span>; <span class="number">1</span>,<span class="number">4</span>; <span class="number">1</span>,<span class="number">5</span>];

<span class="comment">%% Assemblage K (10×10)</span>
K = <span class="function">zeros</span>(<span class="number">10</span>,<span class="number">10</span>);
<span class="keyword">for</span> e=<span class="number">1</span>:<span class="number">4</span>
    <span class="comment">% ... calcul et assemblage</span>
<span class="keyword">end</span>

<span class="comment">%% Contrainte: déplacement normal à la pente nul</span>
<span class="comment">% u₁×cos(45) + v₁×sin(45) = 0 avec pente vers gauche</span>
<span class="comment">% Méthode: Lagrange ou substitution v₁ = -u₁</span>

<span class="comment">%% Résolution et efforts...</span></pre>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="mt-16 border-t border-gray-200 pt-8">
            <div class="trilingual-header text-center mb-4">
                <div class="ar text-enstp-gold font-bold text-lg">المدرسة الوطنية العليا للأشغال العمومية</div>
                <div class="fr text-enstp-navy font-serif font-bold">École Nationale Supérieure des Travaux Publics</div>
                <div class="en text-gray-500 text-sm">National Higher School of Public Works</div>
            </div>
            <p class="text-center text-gray-400 text-sm">
                © 2025 ENSTP - Solution TD N°3 MEF | 2ème Année Cycle Ingénieur
            </p>
        </footer>

    </main>

    <!-- JAVASCRIPT -->
    <script>
        // Navigation entre exercices
        function showExercise(num) {
            // Hide all exercises
            document.querySelectorAll('.exercise-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Show selected
            document.getElementById(`exercise-${num}`).classList.remove('hidden');
            
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach((btn, idx) => {
                if (idx + 1 === num) {
                    btn.classList.remove('text-gray-600', 'hover:bg-gray-100');
                    btn.classList.add('bg-enstp-navy', 'text-white');
                } else {
                    btn.classList.add('text-gray-600', 'hover:bg-gray-100');
                    btn.classList.remove('bg-enstp-navy', 'text-white');
                }
            });
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Tabs dans chaque exercice
        function showSolution(exNum, type) {
            // Hide all content for this exercise
            document.querySelectorAll(`#exercise-${exNum} .solution-content`).forEach(el => {
                el.classList.add('hidden');
            });
            
            // Show selected
            document.getElementById(`content-${exNum}-${type}`).classList.remove('hidden');
            
            // Update tabs
            document.querySelectorAll(`#exercise-${exNum} .solution-tab`).forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`sol-${exNum}-${type}`).classList.add('active');
        }

        // Copy code function
        function copyCode(elementId) {
            const code = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(code).then(() => {
                // Show feedback
                const btn = event.target.closest('button');
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check mr-2"></i>Copié!';
                btn.style.background = '#166534';
                setTimeout(() => {
                    btn.innerHTML = original;
                    btn.style.background = '';
                }, 2000);
            });
        }

        // Download all codes
        function downloadAll() {
            const exercises = [
                { name: 'Exercice1_Treillis_2_Barres.m', id: 'code-ex1' },
                { name: 'Exercice2_Treillis_Triangulaire.m', id: 'code-ex2' },
                { name: 'Exercice3_Charge_Inclinee.m', id: 'code-ex3' },
                { name: 'Exercice4_Structure_5_Noeuds.m', id: 'code-ex4' }
            ];
            
            exercises.forEach((ex, idx) => {
                setTimeout(() => {
                    const code = document.getElementById(ex.id).innerText;
                    const blob = new Blob([code], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = ex.name;
                    a.click();
                    URL.revokeObjectURL(url);
                }, idx * 500);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            showExercise(1);
        });
    </script>

</body>
</html>